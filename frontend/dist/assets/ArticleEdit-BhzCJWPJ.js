import{_ as k,j as A,r as p,o as F,c as l,a as e,t as y,m as S,w as r,v,q as f,F as U,h as V,i as u,p as _,k as i}from"./index-Du8VEhpS.js";const E={class:"form-group"},M={class:"form-group"},q=["value"],B={class:"form-group"},C={class:"form-group"},D={class:"form-group"},L={key:1},N={__name:"ArticleEdit",setup(P){const d=A(),g=_(),n=d.params.id!==void 0,m=p(n),c=p([]),a=p({title:"",summary:"",content:"",category_id:null,status:"published"}),b=async()=>{try{const s=await u.get("/api/categories");c.value=s.data}catch(s){console.error("Failed to fetch categories",s)}},w=async()=>{try{const t=(await u.get(`/api/articles/${d.params.id}`)).data;a.value={title:t.title,summary:t.summary,content:t.content,category_id:t.category_id,status:t.status}}catch(s){console.error("Failed to fetch article",s)}finally{m.value=!1}},x=async()=>{try{n?await u.put(`/api/articles/${d.params.id}`,a.value):await u.post("/api/articles",a.value),g.push("/admin/articles")}catch(s){console.error("Failed to save article",s),alert("Failed to save article")}};return F(async()=>{await b(),n&&await w()}),(s,t)=>(i(),l("div",null,[e("h1",null,y(n?"Edit":"New")+" Article",1),m.value?(i(),l("div",L,"Loading...")):(i(),l("form",{key:0,onSubmit:S(x,["prevent"])},[e("div",E,[t[5]||(t[5]=e("label",null,"Title",-1)),r(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>a.value.title=o),required:""},null,512),[[v,a.value.title]])]),e("div",M,[t[7]||(t[7]=e("label",null,"Category",-1)),r(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>a.value.category_id=o)},[t[6]||(t[6]=e("option",{value:null},"Uncategorized",-1)),(i(!0),l(U,null,V(c.value,o=>(i(),l("option",{key:o.id,value:o.id},y(o.name),9,q))),128))],512),[[f,a.value.category_id]])]),e("div",B,[t[9]||(t[9]=e("label",null,"Status",-1)),r(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>a.value.status=o)},[...t[8]||(t[8]=[e("option",{value:"published"},"Published",-1),e("option",{value:"draft"},"Draft",-1),e("option",{value:"private"},"Private",-1)])],512),[[f,a.value.status]])]),e("div",C,[t[10]||(t[10]=e("label",null,"Summary",-1)),r(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=o=>a.value.summary=o),rows:"3"},null,512),[[v,a.value.summary]])]),e("div",D,[t[11]||(t[11]=e("label",null,"Content",-1)),r(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=o=>a.value.content=o),rows:"15",required:""},null,512),[[v,a.value.content]])]),t[12]||(t[12]=e("button",{type:"submit"},"Save Article",-1))],32))]))}},T=k(N,[["__scopeId","data-v-611b4e27"]]);export{T as default};
