import{_ as k,r as d,o as C,c as l,a as t,w as f,q as m,F as g,h as w,i as c,k as n,t as s,b as _}from"./index-Du8VEhpS.js";const D={class:"header"},A={key:0},S=["onClick"],b=["onClick"],$=["onClick"],j={key:1},F={__name:"CommentList",setup(L){const p=d([]),i=d(!0),r=d(""),u=async()=>{i.value=!0;try{const o=r.value?`/api/comments?status=${r.value}`:"/api/comments",a=await c.get(o);p.value=a.data}catch(o){console.error("Failed to fetch comments",o)}finally{i.value=!1}},v=async(o,a)=>{try{await c.put(`/api/comments/${o}/status`,{status:a}),await u()}catch(e){console.error("Failed to update status",e)}},y=async o=>{if(confirm("Are you sure?"))try{await c.delete(`/api/comments/${o}`),await u()}catch(a){console.error("Failed to delete comment",a)}};return C(u),(o,a)=>(n(),l("div",null,[t("div",D,[a[2]||(a[2]=t("h1",null,"Comments",-1)),f(t("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>r.value=e),onChange:u},[...a[1]||(a[1]=[t("option",{value:""},"All Status",-1),t("option",{value:"pending"},"Pending",-1),t("option",{value:"approved"},"Approved",-1),t("option",{value:"rejected"},"Rejected",-1)])],544),[[m,r.value]])]),i.value?(n(),l("div",j,"Loading...")):(n(),l("table",A,[a[3]||(a[3]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Author"),t("th",null,"Content"),t("th",null,"Article ID"),t("th",null,"Date"),t("th",null,"Status"),t("th",null,"Actions")])],-1)),t("tbody",null,[(n(!0),l(g,null,w(p.value,e=>(n(),l("tr",{key:e.id},[t("td",null,s(e.id),1),t("td",null,s(e.author),1),t("td",null,s(e.content),1),t("td",null,s(e.article_id),1),t("td",null,s(new Date(e.created_at).toLocaleDateString()),1),t("td",null,s(e.status),1),t("td",null,[e.status!=="approved"?(n(),l("button",{key:0,onClick:h=>v(e.id,"approved")},"Approve",8,S)):_("",!0),e.status!=="rejected"?(n(),l("button",{key:1,onClick:h=>v(e.id,"rejected")},"Reject",8,b)):_("",!0),t("button",{onClick:h=>y(e.id),class:"danger"},"Delete",8,$)])]))),128))])]))]))}},B=k(F,[["__scopeId","data-v-9a4d138f"]]);export{B as default};
