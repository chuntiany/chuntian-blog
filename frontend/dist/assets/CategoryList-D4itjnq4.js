import{_ as h,r as i,o as F,c as r,a as e,b as g,F as D,h as M,t as u,m as N,w as C,v as y,i as v,k as d}from"./index-Du8VEhpS.js";const x={key:0},$=["onClick"],E=["onClick"],V={key:1,class:"modal"},A={class:"modal-content"},B={class:"form-group"},L={class:"form-group"},S={class:"actions"},I={__name:"CategoryList",setup(U){const m=i([]),f=i(!0),n=i(!1),s=i(null),a=i({name:"",description:""}),p=async()=>{try{const o=await v.get("/api/categories");m.value=o.data}catch(o){console.error("Failed to fetch categories",o)}finally{f.value=!1}},b=()=>{s.value=null,a.value={name:"",description:""},n.value=!0},_=o=>{s.value=o,a.value={name:o.name,description:o.description},n.value=!0},k=async()=>{try{s.value?await v.put(`/api/categories/${s.value.id}`,a.value):await v.post("/api/categories",a.value),await p(),n.value=!1}catch(o){console.error("Failed to save category",o),alert("Failed to save category")}},w=async o=>{var t,l;if(confirm("Are you sure?"))try{await v.delete(`/api/categories/${o}`),await p()}catch(c){console.error("Failed to delete category",c),alert(((l=(t=c.response)==null?void 0:t.data)==null?void 0:l.error)||"Failed to delete")}};return F(p),(o,t)=>(d(),r("div",null,[e("div",{class:"header"},[t[3]||(t[3]=e("h1",null,"Categories",-1)),e("button",{onClick:b},"New Category")]),f.value?g("",!0):(d(),r("table",x,[t[4]||(t[4]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Name"),e("th",null,"Description"),e("th",null,"Articles"),e("th",null,"Actions")])],-1)),e("tbody",null,[(d(!0),r(D,null,M(m.value,l=>(d(),r("tr",{key:l.id},[e("td",null,u(l.id),1),e("td",null,u(l.name),1),e("td",null,u(l.description),1),e("td",null,u(l.article_count),1),e("td",null,[e("button",{onClick:c=>_(l)},"Edit",8,$),e("button",{onClick:c=>w(l.id),class:"danger"},"Delete",8,E)])]))),128))])])),n.value?(d(),r("div",V,[e("div",A,[e("h2",null,u(s.value?"Edit":"New")+" Category",1),e("form",{onSubmit:N(k,["prevent"])},[e("div",B,[t[5]||(t[5]=e("label",null,"Name",-1)),C(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>a.value.name=l),required:""},null,512),[[y,a.value.name]])]),e("div",L,[t[6]||(t[6]=e("label",null,"Description",-1)),C(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>a.value.description=l)},null,512),[[y,a.value.description]])]),e("div",S,[e("button",{type:"button",onClick:t[2]||(t[2]=l=>n.value=!1)},"Cancel"),t[7]||(t[7]=e("button",{type:"submit"},"Save",-1))])],32)])])):g("",!0)]))}},T=h(I,[["__scopeId","data-v-b8e0490e"]]);export{T as default};
